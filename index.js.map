{"version":3,"file":"index.js","sources":["../src/js/handlers.js","../src/home.js"],"sourcesContent":["import { fetchProducts, fetchCategories, fetchProductById } from './products-api.js';\nimport { renderCategories, renderProducts, renderEmptyMessage } from './render-function.js';\nimport { openModal } from './modal.js';\nimport { refs } from './refs.js';\nimport iziToast from 'izitoast';\n\nlet page = 1;\nlet currentCategory = '';\nlet totalProducts = 0;\n\n//  Завантаження сторінки ===\nexport const handleLoad = async () => {\n  try {\n    const categories = await fetchCategories();\n    renderCategories(categories, refs.categoriesList);\n\n    const data = await fetchProducts(page);\n    totalProducts = data.total;\n    renderProducts(data.products, refs.productsList);\n\n    toggleLoadMoreButton(data.products.length);\n  } catch (err) {\n    iziToast.error({ title: 'Error', message: err.message });\n  }\n};\n\n//  Клік по категорії ===\nexport const handleCategoryClick = async (e) => {\n  if (!e.target.classList.contains('category-btn')) return;\n\n  currentCategory = e.target.textContent;\n  page = 1;\n  refs.productsList.innerHTML = '';\n\n  try {\n    const data = await fetchProducts(page, currentCategory);\n    totalProducts = data.total;\n    renderProducts(data.products, refs.productsList);\n\n    toggleLoadMoreButton(data.products.length);\n    highlightActiveCategory(e.target);\n  } catch (err) {\n    iziToast.error({ title: 'Error', message: err.message });\n  }\n};\n\n//  Клік по товару ===\nexport const handleProductClick = async (e) => {\n  const card = e.target.closest('.product-card');\n  if (!card) return;\n\n  try {\n    const productId = card.dataset.id;\n    const product = await fetchProductById(productId);\n    openModal(product);\n  } catch (err) {\n    iziToast.error({ title: 'Error', message: err.message });\n  }\n};\n\n// 4. Завантаження наступної сторінки ===\nexport const handleLoadMore = async () => {\n  page += 1;\n  try {\n    const data = await fetchProducts(page, currentCategory);\n    renderProducts(data.products, refs.productsList);\n    toggleLoadMoreButton(data.products.length);\n  } catch (err) {\n    iziToast.error({ title: 'Error', message: err.message });\n  }\n};\n\n//  5. Показ/приховування кнопки Load More ===\nconst toggleLoadMoreButton = (productsLength) => {\n  const totalLoaded = page * 12;\n  if (productsLength < 12 || totalLoaded >= totalProducts) {\n    refs.loadMoreBtn.classList.add('hidden');\n    if (productsLength === 0) {\n      renderEmptyMessage(refs.productsList, 'No more products to load.');\n    }\n  } else {\n    refs.loadMoreBtn.classList.remove('hidden');\n  }\n};\n\n// 6. Підсвітка активної категорії ===\nconst highlightActiveCategory = (activeButton) => {\n  document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));\n  activeButton.classList.add('active');\n};","import { handleLoad, handleCategoryClick, handleProductClick, handleLoadMore } from './js/handlers.js';\nimport { refs } from './js/refs.js';\nimport { getItemsCount } from './js/storage.js';\n\ndocument.addEventListener('DOMContentLoaded', handleLoad);\nrefs.categoriesList.addEventListener('click', handleCategoryClick);\nrefs.productsList.addEventListener('click', handleProductClick);\nrefs.loadMoreBtn.addEventListener('click', handleLoadMore);"],"names":["page","currentCategory","totalProducts","handleLoad","categories","fetchCategories","renderCategories","refs","data","fetchProducts","renderProducts","toggleLoadMoreButton","err","iziToast","handleCategoryClick","e","highlightActiveCategory","handleProductClick","card","productId","product","fetchProductById","openModal","handleLoadMore","productsLength","totalLoaded","renderEmptyMessage","activeButton","btn"],"mappings":"kMAMA,IAAIA,EAAO,EACPC,EAAkB,GAClBC,EAAgB,EAGb,MAAMC,EAAa,SAAY,CACpC,GAAI,CACF,MAAMC,EAAa,MAAMC,IACzBC,EAAiBF,EAAYG,EAAK,cAAc,EAEhD,MAAMC,EAAO,MAAMC,EAAcT,CAAI,EACrCE,EAAgBM,EAAK,MACrBE,EAAeF,EAAK,SAAUD,EAAK,YAAY,EAE/CI,EAAqBH,EAAK,SAAS,MAAM,CAC1C,OAAQI,EAAK,CACZC,EAAS,MAAM,CAAE,MAAO,QAAS,QAASD,EAAI,OAAO,CAAE,CACxD,CACH,EAGaE,EAAsB,MAAOC,GAAM,CAC9C,GAAKA,EAAE,OAAO,UAAU,SAAS,cAAc,EAE/C,CAAAd,EAAkBc,EAAE,OAAO,YAC3Bf,EAAO,EACPO,EAAK,aAAa,UAAY,GAE9B,GAAI,CACF,MAAMC,EAAO,MAAMC,EAAcT,EAAMC,CAAe,EACtDC,EAAgBM,EAAK,MACrBE,EAAeF,EAAK,SAAUD,EAAK,YAAY,EAE/CI,EAAqBH,EAAK,SAAS,MAAM,EACzCQ,EAAwBD,EAAE,MAAM,CACjC,OAAQH,EAAK,CACZC,EAAS,MAAM,CAAE,MAAO,QAAS,QAASD,EAAI,OAAO,CAAE,CACxD,EACH,EAGaK,EAAqB,MAAOF,GAAM,CAC7C,MAAMG,EAAOH,EAAE,OAAO,QAAQ,eAAe,EAC7C,GAAKG,EAEL,GAAI,CACF,MAAMC,EAAYD,EAAK,QAAQ,GACzBE,EAAU,MAAMC,EAAiBF,CAAS,EAChDG,EAAUF,CAAO,CAClB,OAAQR,EAAK,CACZC,EAAS,MAAM,CAAE,MAAO,QAAS,QAASD,EAAI,OAAO,CAAE,CACxD,CACH,EAGaW,EAAiB,SAAY,CACxCvB,GAAQ,EACR,GAAI,CACF,MAAMQ,EAAO,MAAMC,EAAcT,EAAMC,CAAe,EACtDS,EAAeF,EAAK,SAAUD,EAAK,YAAY,EAC/CI,EAAqBH,EAAK,SAAS,MAAM,CAC1C,OAAQI,EAAK,CACZC,EAAS,MAAM,CAAE,MAAO,QAAS,QAASD,EAAI,OAAO,CAAE,CACxD,CACH,EAGMD,EAAwBa,GAAmB,CAC/C,MAAMC,EAAczB,EAAO,GACvBwB,EAAiB,IAAMC,GAAevB,GACxCK,EAAK,YAAY,UAAU,IAAI,QAAQ,EACnCiB,IAAmB,GACrBE,EAAmBnB,EAAK,aAAc,2BAA2B,GAGnEA,EAAK,YAAY,UAAU,OAAO,QAAQ,CAE9C,EAGMS,EAA2BW,GAAiB,CAChD,SAAS,iBAAiB,eAAe,EAAE,QAAQC,GAAOA,EAAI,UAAU,OAAO,QAAQ,CAAC,EACxFD,EAAa,UAAU,IAAI,QAAQ,CACrC,ECrFA,SAAS,iBAAiB,mBAAoBxB,CAAU,EACxDI,EAAK,eAAe,iBAAiB,QAASO,CAAmB,EACjEP,EAAK,aAAa,iBAAiB,QAASU,CAAkB,EAC9DV,EAAK,YAAY,iBAAiB,QAASgB,CAAc"}