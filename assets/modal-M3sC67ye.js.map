{"version":3,"file":"modal-M3sC67ye.js","sources":["../../src/js/products-api.js","../../src/js/modal.js"],"sourcesContent":["const BASE_URL = 'https://dummyjson.com';//Базова адреса API для запитів (усі запити починаються з неї).\n\n\n\nexport const fetchCategories = async () => {\n  const res = await fetch(`${BASE_URL}/products/categories`);\n  if (!res.ok) throw new Error(`Error ${res.status}: Failed to fetch categories`);\n  return res.json(); // отримує список категорій, повертає масив рядків\n};\n\nexport const fetchProducts = async (page = 1, category = '') => {\n  const limit = 12;\n  const skip = (page - 1) * limit;\n  //Отримує товари з пагінацією (limit = 12) та можливістю фільтрації по категорії.\n  \n  let url = category\n    ? `${BASE_URL}/products/category/${encodeURIComponent(category)}?limit=${limit}&skip=${skip}`\n    : `${BASE_URL}/products?limit=${limit}&skip=${skip}`;\n\n  const res = await fetch(url);\n  if (!res.ok) throw new Error(`Error ${res.status}: Failed to fetch products`);\n  return res.json(); // Повертає { products: [], total, limit, skip }\n};\n\nexport const fetchProductById = async (id) => {\n  const res = await fetch(`${BASE_URL}/products/${id}`);\n  if (!res.ok) throw new Error(`Error ${res.status}: Product not found`);\n  return res.json(); // Отримує деталі одного товару за id.\n};","//Імпорт функцій для роботи зі сховищем (localStorage) та DOM-елементів.\n\nimport { getFromStorage, toggleItemInStorage, getItemsCount } from './storage.js';\nimport { refs } from './refs.js';\n\nlet currentProduct = null;// Змінна для збереження поточного товару, відкритого в модалці.\n\nexport const openModal = (product) => {\n  currentProduct = product;\n  //// Вставляє HTML з інфо про товар\n  refs.modalContent.innerHTML = `\n    <h2>${product.title}</h2>\n    <img src=\"${product.thumbnail}\" alt=\"${product.title}\">\n    <p>${product.description}</p>\n    <button class=\"modal-product__btn--wishlist\" id=\"wishlist-btn\">${isInStorage('wishlist', product.id) ? 'Remove from Wishlist' : 'Add to Wishlist'}</button>\n    <button class=\"modal-product__btn--cart\" id=\"cart-btn\">${isInStorage('cart', product.id) ? 'Remove from Cart' : 'Add to Cart'}</button>\n  `;\n  const wishlistBtn = document.querySelector('.modal-product__btn--wishlist');\n  wishlistBtn.addEventListener('click', handleWishlistClick );\n  \n  const cartBtn = document.querySelector('.modal-product__btn--cart');\n  cartBtn.addEventListener('click', handleCartClick );\n  \n  refs.modal.classList.add('modal--is-open');// Відкриває модалку\n  //Закриває модалку, якщо натиснута клавіша Escape\n  document.addEventListener('keydown', handleEscapeKey);//Додає закриття по Escape\n};\n\nconst handleWishlistClick = (e) => {\n  toggleItemInStorage('wishlist', currentProduct);\n  const btn = e.currentTarget;\n  btn.textContent = isInStorage('wishlist', currentProduct.id) ? 'Remove from Wishlist' : 'Add to Wishlist';\n  refs.wishlistCounter.textContent = getItemsCount('wishlist');\n}\n  \nconst handleCartClick = (e) => {\n  toggleItemInStorage('cart', currentProduct);\n  const btn = e.currentTarget; \n  btn.textContent = isInStorage('cart', currentProduct.id) ? 'Remove from Cart' : 'Add to Cart';\n  refs.cartCounter.textContent = getItemsCount('cart');\n}\n  \nexport const closeModal = () => {\n  refs.modal.classList.remove('modal--is-open');// Закриває модалку\n  document.removeEventListener('keydown', handleEscapeKey);// Прибирає обробник Escape\n};\n\nconst handleEscapeKey = (e) => {\n  if (e.key === 'Escape') closeModal();\n};//Закриває модалку, якщо натиснута клавіша Escape\n\nfunction isInStorage(key, id) {\n  return getFromStorage(key).some(item => item.id === id);\n}\n//Повертає true, якщо товар з таким id вже є у сховищі за ключем (wishlist, cart).\n"],"names":["BASE_URL","fetchCategories","res","fetchProducts","page","category","skip","url","fetchProductById","id","currentProduct","openModal","product","refs","isInStorage","handleWishlistClick","handleCartClick","handleEscapeKey","e","toggleItemInStorage","btn","getItemsCount","closeModal","key","getFromStorage","item"],"mappings":"uEAAA,MAAMA,EAAW,wBAIJC,EAAkB,SAAY,CACzC,MAAMC,EAAM,MAAM,MAAM,GAAGF,CAAQ,sBAAsB,EACzD,GAAI,CAACE,EAAI,GAAI,MAAM,IAAI,MAAM,SAASA,EAAI,MAAM,8BAA8B,EAC9E,OAAOA,EAAI,MACb,EAEaC,EAAgB,MAAOC,EAAO,EAAGC,EAAW,KAAO,CAE9D,MAAMC,GAAQF,EAAO,GAAK,GAG1B,IAAIG,EAAMF,EACN,GAAGL,CAAQ,sBAAsB,mBAAmBK,CAAQ,CAAC,kBAAwBC,CAAI,GACzF,GAAGN,CAAQ,2BAAiCM,CAAI,GAEpD,MAAMJ,EAAM,MAAM,MAAMK,CAAG,EAC3B,GAAI,CAACL,EAAI,GAAI,MAAM,IAAI,MAAM,SAASA,EAAI,MAAM,4BAA4B,EAC5E,OAAOA,EAAI,MACb,EAEaM,EAAmB,MAAOC,GAAO,CAC5C,MAAMP,EAAM,MAAM,MAAM,GAAGF,CAAQ,aAAaS,CAAE,EAAE,EACpD,GAAI,CAACP,EAAI,GAAI,MAAM,IAAI,MAAM,SAASA,EAAI,MAAM,qBAAqB,EACrE,OAAOA,EAAI,MACb,ECvBA,IAAIQ,EAAiB,KAET,MAACC,EAAaC,GAAY,CACpCF,EAAiBE,EAEjBC,EAAK,aAAa,UAAY;AAAA,UACtBD,EAAQ,KAAK;AAAA,gBACPA,EAAQ,SAAS,UAAUA,EAAQ,KAAK;AAAA,SAC/CA,EAAQ,WAAW;AAAA,qEACyCE,EAAY,WAAYF,EAAQ,EAAE,EAAI,uBAAyB,iBAAiB;AAAA,6DACxFE,EAAY,OAAQF,EAAQ,EAAE,EAAI,mBAAqB,aAAa;AAAA,IAE3G,SAAS,cAAc,+BAA+B,EAC9D,iBAAiB,QAASG,GAEtB,SAAS,cAAc,2BAA2B,EAC1D,iBAAiB,QAASC,GAElCH,EAAK,MAAM,UAAU,IAAI,gBAAgB,EAEzC,SAAS,iBAAiB,UAAWI,CAAe,CACtD,EAEMF,EAAuBG,GAAM,CACjCC,EAAoB,WAAYT,CAAc,EAC9C,MAAMU,EAAMF,EAAE,cACdE,EAAI,YAAcN,EAAY,WAAYJ,EAAe,EAAE,EAAI,uBAAyB,kBACxFG,EAAK,gBAAgB,YAAcQ,EAAc,UAAU,CAC7D,EAEML,EAAmBE,GAAM,CAC7BC,EAAoB,OAAQT,CAAc,EAC1C,MAAMU,EAAMF,EAAE,cACdE,EAAI,YAAcN,EAAY,OAAQJ,EAAe,EAAE,EAAI,mBAAqB,cAChFG,EAAK,YAAY,YAAcQ,EAAc,MAAM,CACrD,EAEaC,EAAa,IAAM,CAC9BT,EAAK,MAAM,UAAU,OAAO,gBAAgB,EAC5C,SAAS,oBAAoB,UAAWI,CAAe,CACzD,EAEMA,EAAmBC,GAAM,CACzBA,EAAE,MAAQ,UAAUI,EAAU,CACpC,EAEA,SAASR,EAAYS,EAAKd,EAAI,CAC5B,OAAOe,EAAeD,CAAG,EAAE,KAAKE,GAAQA,EAAK,KAAOhB,CAAE,CACxD"}